//-----------------------------------------------------------------------------------
// Function Shutdown
//
// File Name : prg_code.c
//
// (C) 2001-2002 ANELVA Corporation
//-----------------------------------------------------------------------------------

#include <stdio.h>
#include <windows.h>
#include <stdlib.h>
#include <process.h>
#include <time.h>
//------------------------------------------------------------------------------------------
#include <Kutlstr.h>
#include <Kutltime.h>
//------------------------------------------------------------------------------------------
#include "cimseqnc.h"
#include "iodefine.h"
//------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------
enum { CM1 , CM2  };
enum { SIM , REAL };
enum { OFF , ON	  };
//------------------------------------------------------------------------------------------
BOOL	SIMULATION_MODE			= FALSE;
//------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------
IO_Name_String_Map IO_STR_Map_Table[] = {
	{ "IO_Driver_Loding"		, _K_D_IO	,	IO_DRIVER_LOAD		,	0	} ,

	{ "e:SCHEDULER"				, _K_S_IO	,	SCHEDULER			,	0	} ,
	
	{ "$0.OPERATOR_CANCEL"		, _K_D_IO	,	OPERATOR_CANCEL		,	0	} ,
	""
};
//------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------
Module_Status Program_Main() {
	int CommStatus;
	char RunStr[31] , BufStr[31];

	STR_SEPERATE( PROGRAM_PARAMETER_READ() , RunStr , BufStr , 30 );

	if		( STRCMP_L( RunStr , "CANCEL"  ) ) {
		WRITE_DIGITAL( OPERATOR_CANCEL , 1 , &CommStatus );
	}
	else if ( STRCMP_L( RunStr , "CANCEL2" ) ) {
		WRITE_DIGITAL( OPERATOR_CANCEL , 1 , &CommStatus );
	}
	
	sprintf( BufStr , "%s" , RunStr );
	WRITE_STRING( SCHEDULER , BufStr , &CommStatus );

	return SYS_SUCCESS;
}
//------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------
BOOL Program_Init_Code() {
	int CommStatus;
	if ( READ_DIGITAL( IO_DRIVER_LOAD , &CommStatus ) == SIM )	SIMULATION_MODE = TRUE;
	else														SIMULATION_MODE = FALSE;
	return TRUE;
}
//------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------
void Program_Enter_Code() {
	char Str1[31] , ElseStr[31];
	STR_SEPERATE( PROGRAM_ARGUMENT_READ() , Str1 , ElseStr , 30 ); // CM1 or CM2
	REPLACE_CHAR_SET( 0 , Str1 );
}
//------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------
